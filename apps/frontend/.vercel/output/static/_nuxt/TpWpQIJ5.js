import{_ as M}from"./DkiIfuYp.js";import{g as L,m as B,r as b,p as N,q as V,c as n,a as t,s as u,l as o,b as C,w as j,n as h,F as p,v as g,z as F,t as l,o as i,d as R}from"./D1Xstx_g.js";import{u as D}from"./DivAE8d_.js";import{u as P}from"./Ba0zKJDI.js";import{u as q}from"./Bm0z7DCj.js";import{u as G}from"./CuslmOQ6.js";const E={class:"px-4 pt-4 pb-24"},H={key:0,class:"card mb-4 bg-yellow-50 border-yellow-200"},J={class:"flex gap-2 mb-4 overflow-x-auto pb-2"},K={key:1,class:"space-y-4"},O={key:0,class:"text-center py-8"},Q={key:1,class:"text-center py-8"},U=["onClick"],W={class:"flex items-center gap-4"},X={class:"flex-1 min-w-0"},Y={class:"font-semibold text-gray-900 truncate"},Z={class:"flex items-center gap-3 text-sm text-gray-500"},tt={key:0},et={key:1},st={key:0,class:"flex flex-wrap gap-1 mt-1"},nt={key:2,class:"space-y-4"},it={key:0,class:"text-center py-12"},lt=["onClick"],ot={class:"flex items-start gap-4"},rt={class:"w-16 h-16 bg-gradient-to-br from-primary-400 to-primary-600 rounded-xl flex items-center justify-center text-3xl shrink-0"},at={class:"flex-1 min-w-0"},dt={class:"flex items-center gap-2 mb-1"},ut={class:"font-semibold text-gray-900 truncate"},ct={class:"px-2 py-0.5 bg-green-100 text-green-700 text-xs font-medium rounded-full shrink-0"},mt={class:"flex items-center gap-3 text-sm text-gray-500 mb-2"},pt={class:"capitalize"},gt={class:"flex flex-wrap gap-1"},xt={key:3,class:"space-y-4"},ft=["onClick"],yt={class:"flex items-center gap-4"},vt={class:"w-14 h-14 bg-gradient-to-br from-primary-400 to-primary-600 rounded-xl flex items-center justify-center text-2xl shrink-0"},bt={class:"flex-1 min-w-0"},ht={class:"font-semibold text-gray-900 truncate"},_t={class:"flex items-center gap-3 text-sm text-gray-500"},kt={class:"bg-white w-full rounded-t-3xl p-6 max-h-[85vh] overflow-y-auto"},wt={class:"flex items-center gap-4 mb-6"},Ct={class:"w-20 h-20 bg-gradient-to-br from-primary-400 to-primary-600 rounded-2xl flex items-center justify-center text-4xl"},jt={class:"text-xl font-bold text-gray-900"},Ft={class:"flex items-center gap-3 text-sm text-gray-500 mt-1"},Rt={class:"capitalize"},St={class:"mb-6"},It={class:"flex flex-wrap gap-2"},zt={class:"mb-6"},Tt={class:"space-y-3"},$t={class:"w-6 h-6 bg-primary-100 text-primary-700 rounded-full flex items-center justify-center text-sm font-medium shrink-0"},At={class:"text-gray-700"},Mt={key:0,class:"mb-6"},Lt={class:"bg-white w-full rounded-t-3xl p-6 max-h-[85vh] overflow-y-auto"},Bt={class:"flex items-center gap-4 mb-4"},Nt={class:"flex-1"},Vt={class:"text-xl font-bold text-gray-900"},Dt={class:"flex items-center gap-3 text-sm text-gray-500 mt-1"},Pt={key:0},qt={key:1},Gt={key:0,class:"text-gray-600 mb-4"},Et={key:1,class:"flex flex-wrap gap-2 mb-4"},Ht={class:"mb-6"},Jt={class:"space-y-2"},Kt={class:"font-medium"},Ot={class:"mb-6"},Qt={class:"space-y-3"},Ut={class:"w-6 h-6 bg-primary-100 text-primary-700 rounded-full flex items-center justify-center text-sm font-medium shrink-0"},Wt={class:"text-gray-700"},Xt={class:"space-y-3"},le=L({__name:"recipes",setup(Yt){const _=D(),f=P(),c=q(),S=G(),v=B(),x=b("family"),d=b(null),r=b(null);function y(m){return{easy:"ðŸŸ¢ Facile",medium:"ðŸŸ¡ Moyen",hard:"ðŸ”´ Difficile"}[m]||m}function I(){console.log("goToAddRecipe called"),v.push("/recipes/add")}function k(m){d.value=m}function z(m){r.value=m}async function T(){r.value&&confirm("ÃŠtes-vous sÃ»r de vouloir supprimer cette recette ?")&&(await c.deleteFamilyRecipe(r.value.id)).success&&(r.value=null)}async function $(){if(d.value?.missingIngredients){for(const m of d.value.missingIngredients)await S.addItem({name:m});d.value=null,v.push("/shopping")}}async function A(){await c.fetchRecipes(),f.currentFamilyId&&(await c.fetchSuggestions(),await c.fetchFamilyRecipes())}return N(async()=>{if(_.init(),!_.isLoggedIn){v.push("/login");return}await f.fetchFamilies(),f.loadCurrentFamily(),await A()}),V(()=>f.currentFamilyId,async m=>{m&&(await c.fetchSuggestions(),await c.fetchFamilyRecipes())}),(m,e)=>{const w=M;return i(),n("div",E,[e[25]||(e[25]=t("header",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"Recettes"),t("p",{class:"text-gray-500"},"Suggestions basÃ©es sur votre frigo")],-1)),o(f).hasFamily?u("",!0):(i(),n("div",H,[e[8]||(e[8]=t("p",{class:"text-yellow-800 text-sm"}," âš ï¸ Vous devez d'abord crÃ©er ou rejoindre une famille. ",-1)),C(w,{to:"/family",class:"text-primary-600 text-sm font-medium mt-2 inline-block"},{default:j(()=>[...e[7]||(e[7]=[R(" GÃ©rer mes familles â†’ ",-1)])]),_:1})])),t("div",J,[t("button",{onClick:e[0]||(e[0]=s=>x.value="family"),class:h(["px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors",o(x)==="family"?"bg-primary-500 text-white":"bg-gray-100 text-gray-600"])}," ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ Mes recettes ",2),t("button",{onClick:e[1]||(e[1]=s=>x.value="suggestions"),class:h(["px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors",o(x)==="suggestions"?"bg-primary-500 text-white":"bg-gray-100 text-gray-600"])}," ðŸŽ¯ Suggestions ",2),t("button",{onClick:e[2]||(e[2]=s=>x.value="all"),class:h(["px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors",o(x)==="all"?"bg-primary-500 text-white":"bg-gray-100 text-gray-600"])}," ðŸ“š Toutes ",2)]),o(x)==="family"?(i(),n("div",K,[t("div",{onClick:I,class:"card flex items-center gap-4 border-2 border-dashed border-primary-300 bg-primary-50 hover:bg-primary-100 transition-colors cursor-pointer"},[...e[9]||(e[9]=[t("div",{class:"w-14 h-14 bg-primary-100 rounded-xl flex items-center justify-center text-2xl"}," âž• ",-1),t("div",null,[t("h3",{class:"font-semibold text-primary-700"},"Ajouter une recette"),t("p",{class:"text-sm text-primary-600"},"Partagez vos recettes avec votre famille")],-1)])]),o(c).isLoading?(i(),n("div",O,[...e[10]||(e[10]=[t("div",{class:"animate-spin w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full mx-auto mb-4"},null,-1),t("p",{class:"text-gray-500"},"Chargement...",-1)])])):o(c).familyRecipes.length===0?(i(),n("div",Q,[...e[11]||(e[11]=[t("div",{class:"text-5xl mb-3"},"ðŸ“–",-1),t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucune recette",-1),t("p",{class:"text-gray-500 text-sm"},"CrÃ©ez votre premiÃ¨re recette de famille !",-1)])])):u("",!0),(i(!0),n(p,null,g(o(c).familyRecipes,s=>(i(),n("div",{key:s.id,class:"card",onClick:a=>z(s)},[t("div",W,[e[12]||(e[12]=t("div",{class:"w-14 h-14 bg-gradient-to-br from-orange-400 to-red-500 rounded-xl flex items-center justify-center text-2xl shrink-0"}," ðŸ³ ",-1)),t("div",X,[t("h3",Y,l(s.title),1),t("div",Z,[s.totalTime?(i(),n("span",tt,"â± "+l(s.totalTime)+" min",1)):u("",!0),s.servings?(i(),n("span",et,"ðŸ‘¥ "+l(s.servings)+" pers.",1)):u("",!0),t("span",null,l(y(s.difficulty)),1)]),s.tags?.length?(i(),n("div",st,[(i(!0),n(p,null,g(s.tags.slice(0,3),a=>(i(),n("span",{key:a,class:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full"},l(a),1))),128))])):u("",!0)]),e[13]||(e[13]=t("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])],8,U))),128))])):o(x)==="suggestions"?(i(),n("div",nt,[o(c).suggestions.length===0?(i(),n("div",it,[e[15]||(e[15]=t("div",{class:"text-6xl mb-4"},"ðŸ³",-1)),e[16]||(e[16]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Pas de suggestions",-1)),e[17]||(e[17]=t("p",{class:"text-gray-500 mb-4"},"Ajoutez des articles Ã  votre frigo pour obtenir des suggestions",-1)),C(w,{to:"/fridge",class:"btn-primary"},{default:j(()=>[...e[14]||(e[14]=[R("GÃ©rer mon frigo",-1)])]),_:1})])):u("",!0),(i(!0),n(p,null,g(o(c).suggestions,s=>(i(),n("div",{key:s.id,class:"card",onClick:a=>k(s)},[t("div",ot,[t("div",rt,l(s.emoji),1),t("div",at,[t("div",dt,[t("h3",ut,l(s.name),1),t("span",ct,l(s.matchPercentage)+"% ",1)]),t("div",mt,[t("span",null,"â± "+l(s.time)+" min",1),t("span",null,"ðŸ‘¥ "+l(s.servings)+" pers.",1),t("span",pt,l(y(s.difficulty)),1)]),t("div",gt,[(i(!0),n(p,null,g(s.matchingIngredients,a=>(i(),n("span",{key:a,class:"px-2 py-0.5 bg-green-50 text-green-700 text-xs rounded-full"}," âœ“ "+l(a),1))),128)),(i(!0),n(p,null,g(s.missingIngredients?.slice(0,2),a=>(i(),n("span",{key:a,class:"px-2 py-0.5 bg-red-50 text-red-600 text-xs rounded-full"}," âœ— "+l(a),1))),128))])])])],8,lt))),128))])):(i(),n("div",xt,[(i(!0),n(p,null,g(o(c).recipes,s=>(i(),n("div",{key:s.id,class:"card",onClick:a=>k(s)},[t("div",yt,[t("div",vt,l(s.emoji),1),t("div",bt,[t("h3",ht,l(s.name),1),t("div",_t,[t("span",null,"â± "+l(s.time)+" min",1),t("span",null,"ðŸ‘¥ "+l(s.servings)+" pers.",1)])]),e[18]||(e[18]=t("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])],8,ft))),128))])),o(d)?(i(),n("div",{key:4,class:"fixed inset-0 bg-black/50 flex items-end z-50",onClick:e[4]||(e[4]=F(s=>d.value=null,["self"]))},[t("div",kt,[t("div",wt,[t("div",Ct,l(o(d).emoji),1),t("div",null,[t("h2",jt,l(o(d).name),1),t("div",Ft,[t("span",null,"â± "+l(o(d).time)+" min",1),t("span",null,"ðŸ‘¥ "+l(o(d).servings)+" pers.",1),t("span",Rt,l(y(o(d).difficulty)),1)])])]),t("div",St,[e[19]||(e[19]=t("h3",{class:"font-semibold text-gray-900 mb-3"},"IngrÃ©dients",-1)),t("div",It,[(i(!0),n(p,null,g(o(d).ingredients,s=>(i(),n("span",{key:s,class:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm"},l(s),1))),128))])]),t("div",zt,[e[20]||(e[20]=t("h3",{class:"font-semibold text-gray-900 mb-3"},"Instructions",-1)),t("ol",Tt,[(i(!0),n(p,null,g(o(d).instructions,(s,a)=>(i(),n("li",{key:a,class:"flex gap-3"},[t("span",$t,l(a+1),1),t("p",At,l(s),1)]))),128))])]),o(d).missingIngredients?.length?(i(),n("div",Mt,[t("button",{onClick:$,class:"w-full btn-outline py-3"}," ðŸ›’ Ajouter "+l(o(d).missingIngredients.length)+" ingrÃ©dient(s) manquant(s) Ã  la liste ",1)])):u("",!0),t("button",{onClick:e[3]||(e[3]=s=>d.value=null),class:"w-full btn-primary py-3"}," Fermer ")])])):u("",!0),o(r)?(i(),n("div",{key:5,class:"fixed inset-0 bg-black/50 flex items-end z-50",onClick:e[6]||(e[6]=F(s=>r.value=null,["self"]))},[t("div",Lt,[t("div",Bt,[e[21]||(e[21]=t("div",{class:"w-20 h-20 bg-gradient-to-br from-orange-400 to-red-500 rounded-2xl flex items-center justify-center text-4xl"}," ðŸ³ ",-1)),t("div",Nt,[t("h2",Vt,l(o(r).title),1),t("div",Dt,[o(r).totalTime?(i(),n("span",Pt,"â± "+l(o(r).totalTime)+" min",1)):u("",!0),o(r).servings?(i(),n("span",qt,"ðŸ‘¥ "+l(o(r).servings)+" pers.",1)):u("",!0),t("span",null,l(y(o(r).difficulty)),1)])])]),o(r).description?(i(),n("p",Gt,l(o(r).description),1)):u("",!0),o(r).tags?.length?(i(),n("div",Et,[(i(!0),n(p,null,g(o(r).tags,s=>(i(),n("span",{key:s,class:"px-3 py-1 bg-primary-100 text-primary-700 text-sm rounded-full"},l(s),1))),128))])):u("",!0),t("div",Ht,[e[23]||(e[23]=t("h3",{class:"font-semibold text-gray-900 mb-3"},"ðŸ¥• IngrÃ©dients",-1)),t("ul",Jt,[(i(!0),n(p,null,g(o(r).ingredients,(s,a)=>(i(),n("li",{key:a,class:"flex items-center gap-2 text-gray-700"},[e[22]||(e[22]=t("span",{class:"w-2 h-2 bg-primary-500 rounded-full"},null,-1)),t("span",Kt,l(s.quantity)+" "+l(s.unit),1),t("span",null,l(s.name),1)]))),128))])]),t("div",Ot,[e[24]||(e[24]=t("h3",{class:"font-semibold text-gray-900 mb-3"},"ðŸ‘¨â€ðŸ³ PrÃ©paration",-1)),t("ol",Qt,[(i(!0),n(p,null,g(o(r).instructions,(s,a)=>(i(),n("li",{key:a,class:"flex gap-3"},[t("span",Ut,l(a+1),1),t("p",Wt,l(s),1)]))),128))])]),t("div",Xt,[t("button",{onClick:T,class:"w-full btn-outline py-3 text-red-600 border-red-200"}," ðŸ—‘ï¸ Supprimer cette recette "),t("button",{onClick:e[5]||(e[5]=s=>r.value=null),class:"w-full btn-primary py-3"}," Fermer ")])])])):u("",!0)])}}});export{le as default};
