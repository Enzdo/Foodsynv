import{_ as F}from"./DkiIfuYp.js";import{g as A,m as I,y as q,j as B,p as D,c as u,a as t,s as L,b as g,w as y,l as i,A as r,B as d,C as N,F as x,v as b,t as v,z,o as m,d as w,n as E}from"./D1Xstx_g.js";import{u as R}from"./DivAE8d_.js";import{u as $}from"./Ba0zKJDI.js";import{u as P}from"./Bm0z7DCj.js";const G={class:"px-4 pt-4 pb-24"},H={class:"mb-6"},O={class:"flex items-center gap-3 mb-2"},J={key:0,class:"card mb-4 bg-yellow-50 border-yellow-200"},K={class:"card"},Q={class:"space-y-4"},W={class:"grid grid-cols-2 gap-3"},X={class:"flex items-center gap-2"},Y={class:"flex items-center gap-2"},Z={class:"grid grid-cols-2 gap-3"},tt={class:"card"},et={class:"space-y-3"},st=["onUpdate:modelValue"],nt=["onUpdate:modelValue"],it=["onUpdate:modelValue"],ot=["onClick"],lt={class:"card"},rt={class:"space-y-3"},at={class:"w-8 h-8 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center font-semibold text-sm flex-shrink-0 mt-2"},dt=["onUpdate:modelValue","placeholder"],ut=["onClick"],mt={class:"card"},pt={class:"flex flex-wrap gap-2 mb-3"},ct=["onClick"],ft={class:"flex gap-3"},gt=["disabled"],wt=A({__name:"add",setup(yt){const k=R(),c=$(),f=P(),h=I(),V=["V√©g√©tarien","Vegan","Sans gluten","Sans lactose","Rapide","√âconomique","Healthy","Comfort food","Dessert","Entr√©e","Plat principal","Ap√©ritif","Petit-d√©jeuner","Brunch","D√Æner","F√™te"],s=q({title:"",description:"",prepTimeMinutes:null,cookTimeMinutes:null,servings:4,difficulty:"medium",ingredients:[{name:"",quantity:"",unit:""}],instructions:[""],tags:[]}),C=B(()=>s.title.trim()!==""&&s.ingredients.some(o=>o.name.trim()!=="")&&s.instructions.some(o=>o.trim()!==""));function M(){s.ingredients.push({name:"",quantity:"",unit:""})}function T(o){s.ingredients.length>1&&s.ingredients.splice(o,1)}function _(){s.instructions.push("")}function U(o){s.instructions.length>1&&s.instructions.splice(o,1)}function j(o){const e=s.tags.indexOf(o);e===-1?s.tags.push(o):s.tags.splice(e,1)}async function S(){const o=s.ingredients.filter(n=>n.name.trim()!==""),e=s.instructions.filter(n=>n.trim()!=="");if(o.length===0){alert("Ajoutez au moins un ingr√©dient");return}if(e.length===0){alert("Ajoutez au moins une √©tape");return}const p=await f.createFamilyRecipe({title:s.title,description:s.description||void 0,prepTimeMinutes:s.prepTimeMinutes||void 0,cookTimeMinutes:s.cookTimeMinutes||void 0,servings:s.servings,difficulty:s.difficulty,ingredients:o,instructions:e,tags:s.tags.length>0?s.tags:void 0});p.success?h.push("/recipes"):alert(p.message||"Erreur lors de la cr√©ation")}return D(async()=>{if(k.init(),!k.isLoggedIn){h.push("/login");return}await c.fetchFamilies(),c.loadCurrentFamily()}),(o,e)=>{const p=F;return m(),u("div",G,[t("header",H,[t("div",O,[g(p,{to:"/recipes",class:"text-gray-500"},{default:y(()=>[...e[6]||(e[6]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1}),e[7]||(e[7]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Nouvelle recette",-1))]),e[8]||(e[8]=t("p",{class:"text-gray-500"},"Ajoutez une recette √† votre famille",-1))]),i(c).hasFamily?L("",!0):(m(),u("div",J,[e[10]||(e[10]=t("p",{class:"text-yellow-800 text-sm"}," ‚ö†Ô∏è Vous devez d'abord cr√©er ou rejoindre une famille. ",-1)),g(p,{to:"/family",class:"text-primary-600 text-sm font-medium mt-2 inline-block"},{default:y(()=>[...e[9]||(e[9]=[w(" G√©rer mes familles ‚Üí ",-1)])]),_:1})])),t("form",{onSubmit:z(S,["prevent"]),class:"space-y-6"},[t("div",K,[e[20]||(e[20]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"üìù Informations",-1)),t("div",Q,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la recette *",-1)),r(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>i(s).title=n),type:"text",required:"",class:"input",placeholder:"Ex: Tarte aux pommes de mamie"},null,512),[[d,i(s).title]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),r(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=n=>i(s).description=n),class:"input",rows:"3",placeholder:"Une br√®ve description de votre recette..."},null,512),[[d,i(s).description]])]),t("div",W,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Temps de pr√©paration",-1)),t("div",X,[r(t("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>i(s).prepTimeMinutes=n),type:"number",min:"0",class:"input flex-1",placeholder:"15"},null,512),[[d,i(s).prepTimeMinutes,void 0,{number:!0}]]),e[13]||(e[13]=t("span",{class:"text-sm text-gray-500"},"min",-1))])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Temps de cuisson",-1)),t("div",Y,[r(t("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>i(s).cookTimeMinutes=n),type:"number",min:"0",class:"input flex-1",placeholder:"30"},null,512),[[d,i(s).cookTimeMinutes,void 0,{number:!0}]]),e[15]||(e[15]=t("span",{class:"text-sm text-gray-500"},"min",-1))])])]),t("div",Z,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Portions",-1)),r(t("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>i(s).servings=n),type:"number",min:"1",class:"input",placeholder:"4"},null,512),[[d,i(s).servings,void 0,{number:!0}]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Difficult√©",-1)),r(t("select",{"onUpdate:modelValue":e[5]||(e[5]=n=>i(s).difficulty=n),class:"input"},[...e[18]||(e[18]=[t("option",{value:"easy"},"üü¢ Facile",-1),t("option",{value:"medium"},"üü° Moyen",-1),t("option",{value:"hard"},"üî¥ Difficile",-1)])],512),[[N,i(s).difficulty]])])])])]),t("div",tt,[e[22]||(e[22]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"ü•ï Ingr√©dients",-1)),t("div",et,[(m(!0),u(x,null,b(i(s).ingredients,(n,l)=>(m(),u("div",{key:l,class:"flex items-center gap-2"},[r(t("input",{"onUpdate:modelValue":a=>n.quantity=a,type:"text",class:"input w-20",placeholder:"200"},null,8,st),[[d,n.quantity]]),r(t("input",{"onUpdate:modelValue":a=>n.unit=a,type:"text",class:"input w-16",placeholder:"g"},null,8,nt),[[d,n.unit]]),r(t("input",{"onUpdate:modelValue":a=>n.name=a,type:"text",class:"input flex-1",placeholder:"Farine",required:""},null,8,it),[[d,n.name]]),t("button",{type:"button",onClick:a=>T(l),class:"text-red-500 p-2"},[...e[21]||(e[21]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ot)]))),128)),t("button",{type:"button",onClick:M,class:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-primary-500 hover:text-primary-500 transition-colors"}," + Ajouter un ingr√©dient ")])]),t("div",lt,[e[24]||(e[24]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"üë®‚Äçüç≥ √âtapes de pr√©paration",-1)),t("div",rt,[(m(!0),u(x,null,b(i(s).instructions,(n,l)=>(m(),u("div",{key:l,class:"flex items-start gap-3"},[t("div",at,v(l+1),1),r(t("textarea",{"onUpdate:modelValue":a=>i(s).instructions[l]=a,class:"input flex-1",rows:"2",placeholder:`√âtape ${l+1}...`,required:""},null,8,dt),[[d,i(s).instructions[l]]]),t("button",{type:"button",onClick:a=>U(l),class:"text-red-500 p-2 mt-2"},[...e[23]||(e[23]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ut)]))),128)),t("button",{type:"button",onClick:_,class:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-primary-500 hover:text-primary-500 transition-colors"}," + Ajouter une √©tape ")])]),t("div",mt,[e[25]||(e[25]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"üè∑Ô∏è Tags (optionnel)",-1)),t("div",pt,[(m(),u(x,null,b(V,n=>t("button",{key:n,type:"button",onClick:l=>j(n),class:E(["px-3 py-1 rounded-full text-sm transition-colors",i(s).tags.includes(n)?"bg-primary-500 text-white":"bg-gray-100 text-gray-600"])},v(n),11,ct)),64))])]),t("div",ft,[g(p,{to:"/recipes",class:"flex-1 btn-outline text-center"},{default:y(()=>[...e[26]||(e[26]=[w(" Annuler ",-1)])]),_:1}),t("button",{type:"submit",class:"flex-1 btn-primary",disabled:i(f).isLoading||!i(C)},v(i(f).isLoading?"Cr√©ation...":"‚ú® Cr√©er la recette"),9,gt)])],32)])}}});export{wt as default};
