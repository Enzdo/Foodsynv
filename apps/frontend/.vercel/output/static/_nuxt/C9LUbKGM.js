import{_ as k}from"./DkiIfuYp.js";import{u as E}from"./DivAE8d_.js";import{u as j}from"./Ba0zKJDI.js";import{u as F}from"./2R3HMaYJ.js";import{u as S}from"./Bm0z7DCj.js";import{g as C,m as I,j as B,p as N,q as V,c as a,a as t,s as x,b as m,t as o,l as i,d as p,w as u,k as U,F as b,v as y,o as n,n as A,x as z}from"./D1Xstx_g.js";const L={class:"px-5 pt-8 pb-32"},P={class:"flex items-center justify-between mb-8"},R={class:"text-3xl font-bold text-dark-900 tracking-tight"},$={class:"text-gray-500 font-medium mt-1 flex items-center gap-2"},q={key:0,class:"card mb-8 bg-primary-50/50 border-primary-100"},D={key:1,class:"grid grid-cols-2 gap-4 mb-8"},G={class:"relative"},T={class:"text-3xl font-bold text-dark-900"},H={class:"relative"},J={class:"text-3xl font-bold text-dark-900"},M={key:2,class:"mb-8"},K={class:"flex items-center justify-between mb-4"},O={class:"space-y-3"},Q={class:"w-14 h-14 bg-surface-50 rounded-2xl flex items-center justify-center text-3xl shadow-inner"},W={class:"flex-1 min-w-0"},X={class:"font-bold text-dark-900 truncate"},Y={key:0,class:"px-2.5 py-1 bg-red-100 text-red-700 text-xs font-bold rounded-lg"},Z={key:3,class:"mb-8"},tt={class:"flex items-center justify-between mb-4"},et={key:0,class:"space-y-4"},st={class:"flex items-stretch"},rt={class:"w-24 bg-surface-100 flex items-center justify-center text-4xl group-hover:scale-105 transition-transform duration-300"},ot={class:"flex-1 p-4"},it={class:"font-bold text-dark-900 mb-1 group-hover:text-primary-600 transition-colors"},nt={class:"text-sm text-gray-500 mb-2"},at={class:"flex items-center gap-3"},lt={class:"px-2 py-1 rounded-lg bg-surface-100 text-xs font-medium text-gray-600"},dt={class:"text-xs font-bold text-primary-600 bg-primary-50 px-2 py-1 rounded-lg"},ut={key:1,class:"card text-center py-8 bg-surface-50 border-dashed border-2 border-gray-200 shadow-none"},mt={key:4},pt={class:"grid grid-cols-2 gap-4"},vt=C({__name:"index",setup(ct){const f=E(),l=j(),c=F(),g=S(),h=I(),v=B(()=>{const r=new Date().getHours();let e="Bonjour";return r>=18?e="Bonsoir":r>=12&&(e="Bon aprÃ¨s-midi"),f.user?`${e} ${f.user.firstName} ! ğŸ‘‹`:`${e} ! ğŸ‘‹`});function _(r){return r===null?"text-gray-500":r<=2?"text-red-600":r<=5?"text-orange-600":"text-yellow-600"}function w(r){return r===null?"Pas de date":r<0?"ExpirÃ©":r===0?"Expire aujourd'hui":r===1?"Expire demain":`Expire dans ${r} jours`}return N(async()=>{if(f.init(),!f.isLoggedIn){h.push("/login");return}await l.fetchFamilies(),l.loadCurrentFamily(),l.currentFamilyId&&await Promise.all([c.fetchItems(),c.fetchExpiringItems(7),g.fetchSuggestions()])}),V(()=>l.currentFamilyId,async r=>{r&&await Promise.all([c.fetchItems(),c.fetchExpiringItems(7),g.fetchSuggestions()])}),(r,e)=>{const d=k;return n(),a("div",L,[t("header",P,[t("div",null,[t("h1",R,o(i(v)),1),t("p",$,[e[0]||(e[0]=t("span",{class:"w-2 h-2 rounded-full bg-primary-500"},null,-1)),p(" "+o(i(l).currentFamily?.name||"Bienvenue sur FoodSync"),1)])]),m(d,{to:"/profile",class:"relative p-0.5 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 shadow-glow group"},{default:u(()=>[...e[1]||(e[1]=[t("div",{class:"p-2.5 bg-white rounded-full group-active:scale-95 transition-transform"},[t("span",{class:"text-xl"},"ğŸ‘¤")],-1)])]),_:1})]),i(l).hasFamily?x("",!0):(n(),a("div",q,[e[3]||(e[3]=U('<div class="flex items-center gap-4"><span class="text-4xl">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span><div class="flex-1"><p class="font-bold text-dark-900 text-lg">Rejoignez une famille</p><p class="text-sm text-gray-600 mt-1">Configurez votre espace familial pour commencer.</p></div></div>',1)),m(d,{to:"/family",class:"mt-4 w-full btn-primary block text-center shadow-none"},{default:u(()=>[...e[2]||(e[2]=[p(" Configurer ma famille ",-1)])]),_:1})])),i(l).hasFamily?(n(),a("div",D,[m(d,{to:"/fridge",class:"card card-hover group !p-4 relative overflow-hidden"},{default:u(()=>[e[6]||(e[6]=t("div",{class:"absolute -right-4 -top-4 w-24 h-24 bg-primary-50 rounded-full blur-2xl group-hover:bg-primary-100 transition-colors"},null,-1)),t("div",G,[e[5]||(e[5]=t("div",{class:"w-12 h-12 bg-white rounded-2xl shadow-sm flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300"},[t("span",{class:"text-2xl"},"ğŸ¥¬")],-1)),t("div",null,[t("p",T,o(i(c).itemCount),1),e[4]||(e[4]=t("p",{class:"text-sm font-medium text-gray-500"},"Articles au frais",-1))])])]),_:1}),m(d,{to:"/expiring",class:"card card-hover group !p-4 relative overflow-hidden"},{default:u(()=>[e[9]||(e[9]=t("div",{class:"absolute -right-4 -top-4 w-24 h-24 bg-secondary-50 rounded-full blur-2xl group-hover:bg-secondary-100 transition-colors"},null,-1)),t("div",H,[e[8]||(e[8]=t("div",{class:"w-12 h-12 bg-white rounded-2xl shadow-sm flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300"},[t("span",{class:"text-2xl"},"âš ï¸")],-1)),t("div",null,[t("p",J,o(i(c).expiringCount),1),e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-500"},"Attention requise",-1))])])]),_:1})])):x("",!0),i(l).hasFamily&&i(c).expiringItems.length>0?(n(),a("section",M,[t("div",K,[e[11]||(e[11]=t("h2",{class:"text-lg font-bold text-dark-900 flex items-center gap-2"},[t("span",null,"â°"),p(" Expire bientÃ´t ")],-1)),m(d,{to:"/expiring",class:"text-primary-600 text-sm font-bold hover:text-primary-700 transition-colors"},{default:u(()=>[...e[10]||(e[10]=[p("Voir tout",-1)])]),_:1})]),t("div",O,[(n(!0),a(b,null,y(i(c).expiringItems.slice(0,3),s=>(n(),a("div",{key:s.id,class:"card flex items-center gap-4 !p-3 hover:bg-gray-50 transition-colors"},[t("div",Q,o(s.emoji),1),t("div",W,[t("h3",X,o(s.name),1),t("p",{class:A(["text-sm font-medium mt-0.5 flex items-center gap-1.5",_(s.daysUntilExpiration)])},[e[12]||(e[12]=t("span",{class:"w-1.5 h-1.5 rounded-full bg-current"},null,-1)),p(" "+o(w(s.daysUntilExpiration)),1)],2)]),s.daysUntilExpiration!==null&&s.daysUntilExpiration<=2?(n(),a("span",Y," J-"+o(s.daysUntilExpiration===0?"0":s.daysUntilExpiration),1)):x("",!0)]))),128))])])):x("",!0),i(l).hasFamily?(n(),a("section",Z,[t("div",tt,[e[14]||(e[14]=t("h2",{class:"text-lg font-bold text-dark-900 flex items-center gap-2"},[t("span",null,"ğŸ³"),p(" IdÃ©es recettes ")],-1)),m(d,{to:"/recipes",class:"text-primary-600 text-sm font-bold hover:text-primary-700 transition-colors"},{default:u(()=>[...e[13]||(e[13]=[p("Voir tout",-1)])]),_:1})]),i(g).suggestions.length>0?(n(),a("div",et,[(n(!0),a(b,null,y(i(g).suggestions.slice(0,2),s=>(n(),z(d,{key:s.id,to:"/recipes",class:"card group !p-0 overflow-hidden"},{default:u(()=>[t("div",st,[t("div",rt,o(s.emoji),1),t("div",ot,[t("h3",it,o(s.name),1),t("p",nt,o(s.matchCount)+" ingrÃ©dient(s) dispo.",1),t("div",at,[t("span",lt," â± "+o(s.time)+" min ",1),t("span",dt,o(s.matchPercentage)+"% match ",1)])])])]),_:2},1024))),128))])):(n(),a("div",ut,[e[16]||(e[16]=t("p",{class:"text-gray-500 text-sm font-medium"},"Remplissez votre frigo pour voir des idÃ©es !",-1)),m(d,{to:"/fridge",class:"text-primary-600 text-sm font-bold mt-2 inline-block hover:underline"},{default:u(()=>[...e[15]||(e[15]=[p(" GÃ©rer mon frigo â†’ ",-1)])]),_:1})]))])):x("",!0),i(l).hasFamily?(n(),a("section",mt,[e[19]||(e[19]=t("h2",{class:"text-lg font-bold text-dark-900 mb-4 flex items-center gap-2"},[t("span",null,"âš¡ï¸"),p(" Actions rapides ")],-1)),t("div",pt,[m(d,{to:"/fridge",class:"btn bg-white border border-gray-100 shadow-sm hover:border-primary-200 text-dark-900 flex-col py-6 h-auto gap-3 group"},{default:u(()=>[...e[17]||(e[17]=[t("span",{class:"text-3xl group-hover:scale-110 transition-transform"},"ğŸ½ï¸",-1),t("span",{class:"font-bold"},"Ajouter au frigo",-1)])]),_:1}),m(d,{to:"/shopping",class:"btn bg-white border border-gray-100 shadow-sm hover:border-primary-200 text-dark-900 flex-col py-6 h-auto gap-3 group"},{default:u(()=>[...e[18]||(e[18]=[t("span",{class:"text-3xl group-hover:scale-110 transition-transform"},"ğŸ›’",-1),t("span",{class:"font-bold"},"Liste de courses",-1)])]),_:1})])])):x("",!0)])}}});export{vt as default};
